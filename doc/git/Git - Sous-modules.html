<!DOCTYPE html>
<html class="js fontface no-webkit no-chrome no-windows no-ie8 wf-adelle-n4-active wf-adelle-n7-active wf-active" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<script src="Git%20-%20Sous-modules_fichiers/20c4a8c482" type="text/javascript"></script><script src="Git%20-%20Sous-modules_fichiers/nr-918.js"></script><script src="Git%20-%20Sous-modules_fichiers/track.js" data-site-id="4f919d1df5a1f504b3000026" id="gauges-tracker" async="" type="text/javascript"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"20c4a8c482","applicationID":"454369","transactionName":"dl5cQkcLXF9XRBoHW1paQRlGAVNHW1lb","queueTime":4,"applicationTime":225,"ttGuid":"","agentToken":null,"agent":""}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(e,t){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,t)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var u=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],c=["addPageAction"],f="api-";i(u,function(e,t){newrelic[t]=r(f+t,"api")}),i(c,function(e,t){newrelic[t]=r(f+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,t,n){function r(e,t){var n=[],r="",i=0;for(r in e)o.call(e,r)&&(n[i]=t(r,e[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],3:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=r},{}],ee:[function(e,t,n){function r(){}function o(e){function t(e){return e&&e instanceof r?e:e?u(e,a,i):i()}function n(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,c=0;u>c;c++)a[c].apply(i,r);var s=f[g[n]];return s&&s.push([m,n,r,i]),i}function p(e,t){w[e]=l(e).concat(t)}function l(e){return w[e]||[]}function d(e){return s[e]=s[e]||o(n)}function v(e,t){c(e,function(e,n){t=t||"feature",g[n]=t,t in f||(f[t]=[])})}var w={},g={},m={on:p,emit:n,get:d,listeners:l,context:t,buffer:v};return m}function i(){return new r}var a="nr@context",u=e("gos"),c=e(2),f={},s={},p=t.exports=o();p.backlog=f},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!w++){var e=v.info=NREUM.info,t=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){c(l,function(t,n){e[t]||(e[t]=n)});var n="https"===p.split(":")[0]||e.sslForHttp;v.proto=n?"https://":"http://",u("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=v.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function o(){"complete"===s.readyState&&i()}function i(){u("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var u=e("handle"),c=e(2),f=window,s=f.document;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:f.XMLHttpRequest,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var p=""+location,l={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-918.min.js"},d=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),v=t.exports={offset:a(),origin:p,features:{},xhrWrappable:d};s.addEventListener?(s.addEventListener("DOMContentLoaded",i,!1),f.addEventListener("load",r,!1)):(s.attachEvent("onreadystatechange",o),f.attachEvent("onload",r)),u("mark",["firstbyte",a()],null,"api");var w=0},{}]},{},["loader"]);</script>

  <title>Git - Sous-modules</title>

  <link href="https://git-scm.com/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link rel="alternate" href="https://git-scm.com/blog.rss" type="application/rss+xml" title="Git - Blog">

  <link rel="stylesheet" media="screen" href="Git%20-%20Sous-modules_fichiers/git-scm-706d78913a27f9708554e141cf34aa5f.css">
  <script src="Git%20-%20Sous-modules_fichiers/modernizr-468530f6d2e42076c8b246a9ad3d1367.js"></script>
<script src="Git%20-%20Sous-modules_fichiers/modernizr-tests-e07ad0fc2200f36dc0e46cb7a62d7d1b.js"></script>
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script src="/javascripts/selectivizr-min.js"></script>
  <![endif]-->

  <script src="Git%20-%20Sous-modules_fichiers/jsq2fql.js" type="text/javascript"></script>
  <style type="text/css">.tk-adelle{font-family:"adelle",serif;}</style><link href="Git%20-%20Sous-modules_fichiers/d.css" rel="stylesheet"><script>
    //<![CDATA[
      try{Typekit.load();}catch(e){}
    //]]>
  </script>

</head>

<body id="documentation">

  <div class="inner">
    <header>

  <a href="https://git-scm.com/"><img src="Git%20-%20Sous-modules_fichiers/logo2x.png" alt="Git" width="110" height="46"></a>
  <span id="tagline">
    <em>--</em>distributed-is-the-new-centralized
  </span>

  <form id="search" action="/search/results">
    <input id="search-text" name="search" placeholder="Search entire site..." autocomplete="off" type="text">
  </form>
  <div id="search-results"></div>

</header>

  </div> <!-- .inner -->

    <div class="inner">
      <div id="content-wrapper">
        <aside class="sidebar">
  <nav>
    <ul>
      <li>
        <a href="https://git-scm.com/about">About</a>
      </li>
      <li>
        <a class="active" href="https://git-scm.com/doc">Documentation</a>
        <ul class="expanded">
          <li>
            <a href="https://git-scm.com/docs">Reference</a>
          </li>
          <li>
            <a href="https://git-scm.com/book">Book</a>
          </li>
          <li>
            <a href="https://git-scm.com/videos">Videos</a>
          </li>
          <li>
            <a href="https://git-scm.com/doc/ext">External Links</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/blog">Blog</a>
      </li>
      <li>
        <a href="https://git-scm.com/downloads">Downloads</a>
        <ul class="">
          <li>
            <a href="https://git-scm.com/downloads/guis">GUI Clients</a>
          </li>
          <li>
            <a href="https://git-scm.com/downloads/logos">Logos</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="https://git-scm.com/community">Community</a>
      </li>
    </ul>
      <hr class="sidebar">
        <p>Download this book in <a href="https://progit2.s3.amazonaws.com/fr/2016-03-05-4c838/progit-fr.1062.pdf">PDF</a>,
   <a href="https://progit2.s3.amazonaws.com/fr/2016-03-05-4c838/progit-fr.1062.mobi" type="application/x-mobipocket-ebook">mobi</a>,
or <a href="https://progit2.s3.amazonaws.com/fr/2016-03-05-4c838/progit-fr.1062.epub" type="application/epub+zip">ePub</a> form for free.</p>

  <p>
This book is translated into
  <a href="https://git-scm.com/book/de">Deutsch</a>,
  <a href="https://git-scm.com/book/zh">简体中文</a>,
  <a href="https://git-scm.com/book/zh-tw">正體中文</a>,
  <a href="https://git-scm.com/book/fr/v2">Français</a>,
  <a href="https://git-scm.com/book/ja">日本語</a>,
  <a href="https://git-scm.com/book/nl">Nederlands</a>,
  <a href="https://git-scm.com/book/ru">Русский</a>,
  <a href="https://git-scm.com/book/ko">한국어</a>,
  <a href="https://git-scm.com/book/pt-br">Português (Brasil)</a> and
  <a href="https://git-scm.com/book/cs">Čeština</a>.
</p>
<p>
Partial translations available in
  <a href="https://git-scm.com/book/ar">Arabic</a>,
  <a href="https://git-scm.com/book/es">Español</a>,
  <a href="https://git-scm.com/book/id">Indonesian</a>,
  <a href="https://git-scm.com/book/it">Italiano</a>,
  <a href="https://git-scm.com/book/fi">Suomi</a>,
  <a href="https://git-scm.com/book/mk">Македонски</a>,
  <a href="https://git-scm.com/book/pl">Polski</a> and
  <a href="https://git-scm.com/book/tr">Türkçe</a>.
</p>
<p>
Translations started for
  <a href="https://git-scm.com/book/az">Azərbaycan dili</a>,
  <a href="https://git-scm.com/book/be">Беларуская</a>,
  <a href="https://git-scm.com/book/ca">Català</a>,
  <a href="https://git-scm.com/book/eo">Esperanto</a>,
  <a href="https://git-scm.com/book/es-ni">Español (Nicaragua)</a>,
  <a href="https://git-scm.com/book/fa" dir="rtl">فارسی</a>,
  <a href="https://git-scm.com/book/hi">हिन्दी</a>,
  <a href="https://git-scm.com/book/hu">Magyar</a>,
  <a href="https://git-scm.com/book/no-nb">Norwegian Bokmål</a>,
  <a href="https://git-scm.com/book/ro">Română</a>,
  <a href="https://git-scm.com/book/sr">Српски</a>,
  <a href="https://git-scm.com/book/th">ภาษาไทย</a>,
  <a href="https://git-scm.com/book/vi">Tiếng Việt</a>,
  <a href="https://git-scm.com/book/uk">Українська</a> and
  <a href="https://git-scm.com/book/uz/v2">Ўзбекча</a>.
</p>
<hr class="sidebar">
<p>
The source of this book is <a href="https://github.com/progit/progit2">hosted on GitHub.</a><br>
Patches, suggestions and comments are welcome.
</p>

  

  </nav>
</aside>
        <div id="content">
          

<div id="book-chapters">
  <a class="dropdown-trigger" id="book-chapters-trigger" data-panel-id="chapters-dropdown" href="#">Chapters ▾</a>
<div class="dropdown-panel" id="chapters-dropdown">
  <div class="three-column">
    <div class="column-left">
      <ol class="book-toc">
  <li class="chapter">
  <h2>1. <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-%C3%80-propos-de-la-gestion-de-version">Démarrage rapide</a></h2>
    <ol>
          <li>
            1.1
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-%C3%80-propos-de-la-gestion-de-version">À propos de la gestion de version</a>
          </li>
          <li>
            1.2
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-Une-rapide-histoire-de-Git">Une rapide histoire de Git</a>
          </li>
          <li>
            1.3
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-Rudiments-de-Git">Rudiments de Git</a>
          </li>
          <li>
            1.4
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-La-ligne-de-commande">La ligne de commande</a>
          </li>
          <li>
            1.5
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-Installation-de-Git">Installation de Git</a>
          </li>
          <li>
            1.6
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-Param%C3%A9trage-%C3%A0-la-premi%C3%A8re-utilisation-de-Git">Paramétrage à la première utilisation de Git</a>
          </li>
          <li>
            1.7
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-Obtenir-de-l%E2%80%99aide">Obtenir de l’aide</a>
          </li>
          <li>
            1.8
            <a href="https://git-scm.com/book/fr/v2/D%C3%A9marrage-rapide-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>2. <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-D%C3%A9marrer-un-d%C3%A9p%C3%B4t-Git">Les bases de Git</a></h2>
    <ol>
          <li>
            2.1
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-D%C3%A9marrer-un-d%C3%A9p%C3%B4t-Git">Démarrer un dépôt Git</a>
          </li>
          <li>
            2.2
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-Enregistrer-des-modifications-dans-le-d%C3%A9p%C3%B4t">Enregistrer des modifications dans le dépôt</a>
          </li>
          <li>
            2.3
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-Visualiser-l%E2%80%99historique-des-validations">Visualiser l’historique des validations</a>
          </li>
          <li>
            2.4
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-Annuler-des-actions">Annuler des actions</a>
          </li>
          <li>
            2.5
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-Travailler-avec-des-d%C3%A9p%C3%B4ts-distants">Travailler avec des dépôts distants</a>
          </li>
          <li>
            2.6
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-%C3%89tiquetage">Étiquetage</a>
          </li>
          <li>
            2.7
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-Les-alias-Git">Les alias Git</a>
          </li>
          <li>
            2.8
            <a href="https://git-scm.com/book/fr/v2/Les-bases-de-Git-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>3. <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Les-branches-en-bref">Les branches avec Git</a></h2>
    <ol>
          <li>
            3.1
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Les-branches-en-bref">Les branches en bref</a>
          </li>
          <li>
            3.2
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Branches-et-fusions%C2%A0%3A-les-bases">Branches et fusions&nbsp;: les bases</a>
          </li>
          <li>
            3.3
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Gestion-des-branches">Gestion des branches</a>
          </li>
          <li>
            3.4
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Travailler-avec-les-branches">Travailler avec les branches</a>
          </li>
          <li>
            3.5
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Branches-distantes">Branches distantes</a>
          </li>
          <li>
            3.6
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-Rebaser-Rebasing">Rebaser (Rebasing)</a>
          </li>
          <li>
            3.7
            <a href="https://git-scm.com/book/fr/v2/Les-branches-avec-Git-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>4. <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-Protocoles">Git sur le serveur</a></h2>
    <ol>
          <li>
            4.1
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-Protocoles">Protocoles</a>
          </li>
          <li>
            4.2
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-Installation-de-Git-sur-un-serveur">Installation de Git sur un serveur</a>
          </li>
          <li>
            4.3
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-G%C3%A9n%C3%A9ration-des-cl%C3%A9s-publiques-SSH">Génération des clés publiques SSH</a>
          </li>
          <li>
            4.4
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-Mise-en-place-du-serveur">Mise en place du serveur</a>
          </li>
          <li>
            4.5
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-D%C3%A9mon-Daemon-Git">Démon (Daemon) Git</a>
          </li>
          <li>
            4.6
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-HTTP-intelligent">HTTP intelligent</a>
          </li>
          <li>
            4.7
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-GitWeb">GitWeb</a>
          </li>
          <li>
            4.8
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-GitLab">GitLab</a>
          </li>
          <li>
            4.9
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-Git-h%C3%A9berg%C3%A9">Git hébergé</a>
          </li>
          <li>
            4.10
            <a href="https://git-scm.com/book/fr/v2/Git-sur-le-serveur-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>5. <a href="https://git-scm.com/book/fr/v2/Git-distribu%C3%A9-D%C3%A9veloppements-distribu%C3%A9s">Git distribué</a></h2>
    <ol>
          <li>
            5.1
            <a href="https://git-scm.com/book/fr/v2/Git-distribu%C3%A9-D%C3%A9veloppements-distribu%C3%A9s">Développements distribués</a>
          </li>
          <li>
            5.2
            <a href="https://git-scm.com/book/fr/v2/Git-distribu%C3%A9-Contribution-%C3%A0-un-projet">Contribution à un projet</a>
          </li>
          <li>
            5.3
            <a href="https://git-scm.com/book/fr/v2/Git-distribu%C3%A9-Maintenance-d%E2%80%99un-projet">Maintenance d’un projet</a>
          </li>
          <li>
            5.4
            <a href="https://git-scm.com/book/fr/v2/Git-distribu%C3%A9-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>6. <a href="https://git-scm.com/book/fr/v2/GitHub-Configuration-et-param%C3%A9trage-d%E2%80%99un-compte">GitHub</a></h2>
    <ol>
          <li>
            6.1
            <a href="https://git-scm.com/book/fr/v2/GitHub-Configuration-et-param%C3%A9trage-d%E2%80%99un-compte">Configuration et paramétrage d’un compte</a>
          </li>
          <li>
            6.2
            <a href="https://git-scm.com/book/fr/v2/GitHub-Contribution-%C3%A0-un-projet">Contribution à un projet</a>
          </li>
          <li>
            6.3
            <a href="https://git-scm.com/book/fr/v2/GitHub-Maintenance-d%E2%80%99un-projet">Maintenance d’un projet</a>
          </li>
          <li>
            6.4
            <a href="https://git-scm.com/book/fr/v2/GitHub-Gestion-d%E2%80%99un-regroupement">Gestion d’un regroupement</a>
          </li>
          <li>
            6.5
            <a href="https://git-scm.com/book/fr/v2/GitHub-%C3%89criture-de-scripts-pour-GitHub">Écriture de scripts pour GitHub</a>
          </li>
          <li>
            6.6
            <a href="https://git-scm.com/book/fr/v2/GitHub-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
</ol>

    </div>
    <div class="column-middle">
      <ol class="book-toc">
  <li class="chapter">
  <h2>7. <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-S%C3%A9lection-des-versions">Utilitaires Git</a></h2>
    <ol>
          <li>
            7.1
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-S%C3%A9lection-des-versions">Sélection des versions</a>
          </li>
          <li>
            7.2
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Indexation-interactive">Indexation interactive</a>
          </li>
          <li>
            7.3
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Remisage-et-nettoyage">Remisage et nettoyage</a>
          </li>
          <li>
            7.4
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Signer-votre-travail">Signer votre travail</a>
          </li>
          <li>
            7.5
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Recherche">Recherche</a>
          </li>
          <li>
            7.6
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-R%C3%A9%C3%A9crire-l%E2%80%99historique">Réécrire l’historique</a>
          </li>
          <li>
            7.7
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Reset-d%C3%A9mystifi%C3%A9">Reset démystifié</a>
          </li>
          <li>
            7.8
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Fusion-avanc%C3%A9e">Fusion avancée</a>
          </li>
          <li>
            7.9
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Rerere">Rerere</a>
          </li>
          <li>
            7.10
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-D%C3%A9boguer-avec-Git">Déboguer avec Git</a>
          </li>
          <li>
            7.11
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Sous-modules">Sous-modules</a>
          </li>
          <li>
            7.12
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Empaquetage-bundling">Empaquetage (bundling)</a>
          </li>
          <li>
            7.13
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Replace">Replace</a>
          </li>
          <li>
            7.14
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Stockage-des-identifiants">Stockage des identifiants</a>
          </li>
          <li>
            7.15
            <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>8. <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-Configuration-de-Git">Personnalisation de Git</a></h2>
    <ol>
          <li>
            8.1
            <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-Configuration-de-Git">Configuration de Git</a>
          </li>
          <li>
            8.2
            <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-Attributs-Git">Attributs Git</a>
          </li>
          <li>
            8.3
            <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-Crochets-Git">Crochets Git</a>
          </li>
          <li>
            8.4
            <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-Exemple-de-politique-g%C3%A9r%C3%A9e-par-Git">Exemple de politique gérée par Git</a>
          </li>
          <li>
            8.5
            <a href="https://git-scm.com/book/fr/v2/Personnalisation-de-Git-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>9. <a href="https://git-scm.com/book/fr/v2/Git-et-les-autres-syst%C3%A8mes-Git-comme-client">Git et les autres systèmes</a></h2>
    <ol>
          <li>
            9.1
            <a href="https://git-scm.com/book/fr/v2/Git-et-les-autres-syst%C3%A8mes-Git-comme-client">Git comme client</a>
          </li>
          <li>
            9.2
            <a href="https://git-scm.com/book/fr/v2/Git-et-les-autres-syst%C3%A8mes-Migration-vers-Git">Migration vers Git</a>
          </li>
          <li>
            9.3
            <a href="https://git-scm.com/book/fr/v2/Git-et-les-autres-syst%C3%A8mes-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>10. <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Plomberie-et-porcelaine">Les tripes de Git</a></h2>
    <ol>
          <li>
            10.1
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Plomberie-et-porcelaine">Plomberie et porcelaine</a>
          </li>
          <li>
            10.2
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Les-objets-de-Git">Les objets de Git</a>
          </li>
          <li>
            10.3
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-R%C3%A9f%C3%A9rences-Git">Références Git</a>
          </li>
          <li>
            10.4
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Fichiers-group%C3%A9s">Fichiers groupés</a>
          </li>
          <li>
            10.5
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-La-refspec">La refspec</a>
          </li>
          <li>
            10.6
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Les-protocoles-de-transfert">Les protocoles de transfert</a>
          </li>
          <li>
            10.7
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Maintenance-et-r%C3%A9cup%C3%A9ration-de-donn%C3%A9es">Maintenance et récupération de données</a>
          </li>
          <li>
            10.8
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-Les-variables-d%E2%80%99environnement">Les variables d’environnement</a>
          </li>
          <li>
            10.9
            <a href="https://git-scm.com/book/fr/v2/Les-tripes-de-Git-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>A1. <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Graphical-Interfaces">Git in Other Environments</a></h2>
    <ol>
          <li>
            A1.1
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Graphical-Interfaces">Graphical Interfaces</a>
          </li>
          <li>
            A1.2
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Git-in-Visual-Studio">Git in Visual Studio</a>
          </li>
          <li>
            A1.3
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Git-in-Eclipse">Git in Eclipse</a>
          </li>
          <li>
            A1.4
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Git-in-Bash">Git in Bash</a>
          </li>
          <li>
            A1.5
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Git-in-Zsh">Git in Zsh</a>
          </li>
          <li>
            A1.6
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Git-in-Powershell">Git in Powershell</a>
          </li>
          <li>
            A1.7
            <a href="https://git-scm.com/book/fr/v2/Git-in-Other-Environments-Summary">Summary</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>A2. <a href="https://git-scm.com/book/fr/v2/Embedding-Git-in-your-Applications-Command-line-Git">Embedding Git in your Applications</a></h2>
    <ol>
          <li>
            A2.1
            <a href="https://git-scm.com/book/fr/v2/Embedding-Git-in-your-Applications-Command-line-Git">Command-line Git</a>
          </li>
          <li>
            A2.2
            <a href="https://git-scm.com/book/fr/v2/Embedding-Git-in-your-Applications-Libgit2">Libgit2</a>
          </li>
          <li>
            A2.3
            <a href="https://git-scm.com/book/fr/v2/Embedding-Git-in-your-Applications-JGit">JGit</a>
          </li>
    </ol>
  </li>
</ol>

    </div>
    <div class="column-right">
      <ol class="book-toc">
  <li class="chapter">
  <h2>A3. <a href="https://git-scm.com/book/fr/v2/Git-Commands-Setup-and-Config">Git Commands</a></h2>
    <ol>
          <li>
            A3.1
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Setup-and-Config">Setup and Config</a>
          </li>
          <li>
            A3.2
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Getting-and-Creating-Projects">Getting and Creating Projects</a>
          </li>
          <li>
            A3.3
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Basic-Snapshotting">Basic Snapshotting</a>
          </li>
          <li>
            A3.4
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Branching-and-Merging">Branching and Merging</a>
          </li>
          <li>
            A3.5
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Sharing-and-Updating-Projects">Sharing and Updating Projects</a>
          </li>
          <li>
            A3.6
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Inspection-and-Comparison">Inspection and Comparison</a>
          </li>
          <li>
            A3.7
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Debugging">Debugging</a>
          </li>
          <li>
            A3.8
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Patching">Patching</a>
          </li>
          <li>
            A3.9
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Email">Email</a>
          </li>
          <li>
            A3.10
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-External-Systems">External Systems</a>
          </li>
          <li>
            A3.11
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Administration">Administration</a>
          </li>
          <li>
            A3.12
            <a href="https://git-scm.com/book/fr/v2/Git-Commands-Plumbing-Commands">Plumbing Commands</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>A1. <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Interfaces-graphiques">Git dans d’autres environnements</a></h2>
    <ol>
          <li>
            A1.1
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Interfaces-graphiques">Interfaces graphiques</a>
          </li>
          <li>
            A1.2
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Git-dans-Visual-Studio">Git dans Visual Studio</a>
          </li>
          <li>
            A1.3
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Git-dans-Eclipse">Git dans Eclipse</a>
          </li>
          <li>
            A1.4
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Git-dans-Bash">Git dans Bash</a>
          </li>
          <li>
            A1.5
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Git-dans-Zsh">Git dans Zsh</a>
          </li>
          <li>
            A1.6
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-Git-dans-Powershell">Git dans Powershell</a>
          </li>
          <li>
            A1.7
            <a href="https://git-scm.com/book/fr/v2/Git-dans-d%E2%80%99autres-environnements-R%C3%A9sum%C3%A9">Résumé</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>A2. <a href="https://git-scm.com/book/fr/v2/Embarquer-Git-dans-vos-applications-Git-en-ligne-de-commande">Embarquer Git dans vos applications</a></h2>
    <ol>
          <li>
            A2.1
            <a href="https://git-scm.com/book/fr/v2/Embarquer-Git-dans-vos-applications-Git-en-ligne-de-commande">Git en ligne de commande</a>
          </li>
          <li>
            A2.2
            <a href="https://git-scm.com/book/fr/v2/Embarquer-Git-dans-vos-applications-Libgit2">Libgit2</a>
          </li>
          <li>
            A2.3
            <a href="https://git-scm.com/book/fr/v2/Embarquer-Git-dans-vos-applications-JGit">JGit</a>
          </li>
    </ol>
  </li>
  <li class="chapter">
  <h2>A3. <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Installation-et-configuration">Commandes Git</a></h2>
    <ol>
          <li>
            A3.1
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Installation-et-configuration">Installation et configuration</a>
          </li>
          <li>
            A3.2
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Obtention-et-cr%C3%A9ation-des-projets">Obtention et création des projets</a>
          </li>
          <li>
            A3.3
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Capture-d%E2%80%99instantan%C3%A9-basique">Capture d’instantané basique</a>
          </li>
          <li>
            A3.4
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Cr%C3%A9ation-de-branches-et-fusion">Création de branches et fusion</a>
          </li>
          <li>
            A3.5
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Partage-et-mise-%C3%A0-jour-de-projets">Partage et mise à jour de projets</a>
          </li>
          <li>
            A3.6
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Inspection-et-comparaison">Inspection et comparaison</a>
          </li>
          <li>
            A3.7
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-D%C3%A9bogage">Débogage</a>
          </li>
          <li>
            A3.8
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Patchs">Patchs</a>
          </li>
          <li>
            A3.9
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Courriel">Courriel</a>
          </li>
          <li>
            A3.10
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Syst%C3%A8mes-externes">Systèmes externes</a>
          </li>
          <li>
            A3.11
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Administration">Administration</a>
          </li>
          <li>
            A3.12
            <a href="https://git-scm.com/book/fr/v2/Commandes-Git-Commandes-de-plomberie">Commandes de plomberie</a>
          </li>
    </ol>
  </li>
</ol>

    </div>
  </div>
 </div>

    <span class="light" id="edition">
      2nd Edition
    </span>
</div>

<div id="main" class="book edition2">
    <h1>7.11 Utilitaires Git - Sous-modules</h1>
  <div><a id="_git_submodules"></a>
<h2>Sous-modules</h2>

<p>Il arrive souvent lorsque vous travaillez sur un projet que vous 
deviez utiliser un autre projet comme dépendance.
Cela peut être une bibliothèque qui est développée par une autre équipe 
ou que vous développez séparément pour l’utiliser dans plusieurs projets
 parents.
Ce scénario provoque un problème habituel&nbsp;: vous voulez être 
capable de gérer deux projets séparés tout en utilisant l’un dans 
l’autre.</p>

<p>Voici un exemple.
Supposons que vous développez un site web et que vous créez des flux 
Atom.
Plutôt que d’écrire votre propre code de génération Atom, vous décidez 
d’utiliser une bibliothèque.
Vous allez vraisemblablement devoir soit inclure ce code depuis un 
gestionnaire partagé comme CPAN ou Ruby gem, soit copier le code source 
dans votre propre arborescence de projet.
Le problème d’inclure la bibliothèque en tant que bibliothèque externe 
est qu’il est difficile de la personnaliser de quelque manière que ce 
soit et encore plus de la déployer, car vous devez vous assurer de la 
disponibilité de la bibliothèque chez chaque client.
Mais le problème d’inclure le code dans votre propre projet est que 
n’importe quelle personnalisation que vous faites est difficile à 
fusionner lorsque les modifications du développement principal arrivent.</p>

<p>Git gère ce problème avec les sous-modules.
Les sous-modules vous permettent de gérer un dépôt Git comme un sous-répertoire d’un autre dépôt Git.
Cela vous laisse la possibilité de cloner un dépôt dans votre projet et de garder isolés les <strong>commits</strong> de ce dépôt.</p>








<section data-type="sect2" id="_starting_submodules">
<h3 id="Démarrer-un-sous-module"><a href="#D%C3%A9marrer-un-sous-module">Démarrer un sous-module</a></h3>

<p>Détaillons le développement d’un projet simple qui a été divisé en un projet principal et quelques sous-projets.</p>

<p>Commençons par ajouter le dépôt d’un projet Git existant comme sous-module d’un dépôt sur lequel nous travaillons.
Pour ajouter un nouveau sous-module, nous utilisons la commande <code>git submodule add</code> avec l’URL du projet que nous souhaitons suivre.
Dans cette exemple, nous ajoutons une bibliothèque nommée «&nbsp;DbConnector&nbsp;».</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule add https://github.com/chaconinc/DbConnector
<code class="go">Clonage dans 'DbConnector'...</code>
<code class="go">remote: Counting objects: 11, done.</code>
<code class="go">remote: Compressing objects: 100% (10/10), done.</code>
<code class="go">remote: Total 11 (delta 0), reused 11 (delta 0)</code>
<code class="go">Dépaquetage des objets: 100% (11/11), fait.</code>
<code class="go">Vérification de la connectivité... fait.</code></pre>

<p>Par défaut, les sous-modules ajoutent le sous-projet dans un 
répertoire portant le même nom que le dépôt, dans notre cas 
«&nbsp;DbConnector&nbsp;».
Vous pouvez ajouter un chemin différent à la fin de la commande si vous 
souhaitez le placer ailleurs.</p>

<p>Si vous lancez <code>git status</code> à ce moment, vous noterez quelques différences.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git status
<code class="go">Sur la branche master</code>
<code class="go">Votre branche est à jour avec 'origin/master'.</code>

<code class="go">Modifications qui seront validées :</code>
<code class="go">  (utilisez "git reset &amp;lt;fichier&amp;gt;..." pour désindexer)</code>

<code class="go">	nouveau fichier :   .gitmodules</code>
<code class="go">	nouveau fichier :   DbConnector</code></pre>

<p>Premièrement, un fichier <code>.gitmodules</code> vient d’apparaître.
C’est le fichier de configuration qui stocke la liaison entre l’URL du 
projet et le sous-répertoire local dans lequel vous l’avez tiré.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> cat .gitmodules
<code class="go">[submodule "DbConnector"]</code>
<code class="go">	path = DbConnector</code>
<code class="go">	url = https://github.com/chaconinc/DbConnector</code></pre>

<p>Si vous avez plusieurs sous-modules, vous aurez plusieurs entrées dans ce fichier.
Il est important de noter que ce fichier est en gestion de version comme vos autres fichiers, à l’instar de votre fichier <code>.gitignore</code>.
Il est poussé et tiré comme le reste de votre projet.
C’est également le moyen que les autres personnes qui clonent votre projet ont de savoir où récupérer le projet du sous-module.</p>
<div data-type="note" id="id-3AUKc6hdCR">
<h6>Note</h6>
<p>Comme l’URL dans le fichier <code>.gitmodules</code> est ce que les 
autres personnes essaieront en premier de cloner et de tirer, 
assurez-vous que cette URL est effectivement accessible par les 
personnes concernées.
Par exemple, si vous utilisez une URL différente pour pousser que celle 
que les autres utiliseront pour tirer, utilisez l’URL auquelle les 
autres ont accès.
Vous pouvez surcharger cette URL localement pour votre usage propre avec
 la commande <code>git config submodule.DbConnector.url PRIVATE_URL</code>.</p>
</div>

<p>L’autre information dans la sortie de <code>git status</code> est l’entrée du répertoire du projet.
Si vous exécutez <code>git diff</code>, vous verrez quelque chose d’intéressant&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff --cached DbConnector
<code class="go">diff --git a/DbConnector b/DbConnector</code>
<code class="go">new file mode 160000</code>
<code class="go">index 0000000..c3f01dc</code>
<code class="go">--- /dev/null</code>
<code class="go">+++ b/DbConnector</code>
<code class="go">@@ -0,0 +1 @@</code>
<code class="go">+Subproject commit c3f01dc8862123d317dd46284b05b6892c7b29bc</code></pre>

<p>Même si <code>DbConnector</code> est un sous-répertoire de votre 
répertoire de travail, Git le voit comme un sous-module et ne suit pas 
son contenu (si vous n’êtes pas dans ce répertoire).
En échange, Git l’enregistre comme un <strong>commit</strong> particulier de ce dépôt.</p>

<p>Si vous souhaitez une sortie diff plus agréable, vous pouvez passer l’option <code>--submodule</code> à <code>git diff</code>.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff --cached --submodule
<code class="go">diff --git a/.gitmodules b/.gitmodules</code>
<code class="go">new file mode 100644</code>
<code class="go">index 0000000..71fc376</code>
<code class="go">--- /dev/null</code>
<code class="go">+++ b/.gitmodules</code>
<code class="go">@@ -0,0 +1,3 @@</code>
<code class="go">+[submodule "DbConnector"]</code>
<code class="go">+       path = DbConnector</code>
<code class="go">+       url = https://github.com/chaconinc/DbConnector</code>
<code class="go">Submodule DbConnector 0000000...c3f01dc (new submodule)</code></pre>

<p>Au moment de valider, vous voyez quelque chose comme&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git commit -am <code class="s1">'added DbConnector module'</code>
<code class="go">[master fb9093c] added DbConnector module</code>
<code class="go"> 2 files changed, 4 insertions(+)</code>
<code class="go"> create mode 100644 .gitmodules</code>
<code class="go"> create mode 160000 DbConnector</code></pre>

<p>Remarquez le mode 160000 pour l’entrée <code>DbConnector</code>.
C’est un mode spécial de Git qui signifie globalement que vous êtes en train d’enregistrer un <strong>commit</strong> comme un répertoire plutôt qu’un sous-répertoire ou un fichier.</p>
</section>













<section data-type="sect2" id="_cloning_submodules">
<h3 id="Cloner-un-projet-avec-des-sous-modules"><a href="#Cloner-un-projet-avec-des-sous-modules">Cloner un projet avec des sous-modules</a></h3>

<p>Maintenant, vous allez apprendre à cloner un projet contenant des 
sous-modules.
Quand vous récupérez un tel projet, vous obtenez les différents 
répertoires qui contiennent les sous-modules, mais encore aucun des 
fichiers&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git clone https://github.com/chaconinc/MainProject
<code class="go">Clonage dans 'MainProject'...</code>
<code class="go">remote: Counting objects: 14, done.</code>
<code class="go">remote: Compressing objects: 100% (13/13), done.</code>
<code class="go">remote: Total 14 (delta 1), reused 13 (delta 0)</code>
<code class="go">Dépaquetage des objets: 100% (14/14), fait.</code>
<code class="go">Vérification de la connectivité... fait.</code>
<code class="gp">$</code> <code class="nb">cd </code>MainProject
<code class="gp">$</code> ls -la
<code class="go">total 16</code>
<code class="go">drwxr-xr-x   9 schacon  staff  306 Sep 17 15:21 .</code>
<code class="go">drwxr-xr-x   7 schacon  staff  238 Sep 17 15:21 ..</code>
<code class="go">drwxr-xr-x  13 schacon  staff  442 Sep 17 15:21 .git</code>
<code class="go">-rw-r--r--   1 schacon  staff   92 Sep 17 15:21 .gitmodules</code>
<code class="go">drwxr-xr-x   2 schacon  staff   68 Sep 17 15:21 DbConnector</code>
<code class="go">-rw-r--r--   1 schacon  staff  756 Sep 17 15:21 Makefile</code>
<code class="go">drwxr-xr-x   3 schacon  staff  102 Sep 17 15:21 includes</code>
<code class="go">drwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 scripts</code>
<code class="go">drwxr-xr-x   4 schacon  staff  136 Sep 17 15:21 src</code>
<code class="gp">$</code> <code class="nb">cd </code>DbConnector/
<code class="gp">$</code> ls
<code class="gp">$</code></pre>

<p>Le répertoire <code>DbConnector</code> est présent mais vide.
Vous devez exécuter deux commandes&nbsp;: <code>git submodule init</code> pour initialiser votre fichier local de configuration, et <code>git submodule update</code> pour tirer toutes les données de ce projet et récupérer le <strong>commit</strong> approprié tel que listé dans votre super-projet&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule init
<code class="go">Sous-module 'DbConnector' (https://github.com/chaconinc/DbConnector) enregistré pour le chemin 'DbConnector'</code>
<code class="gp">$</code> git submodule update
<code class="go">Clonage dans 'DbConnector'...</code>
<code class="go">remote: Counting objects: 11, done.</code>
<code class="go">remote: Compressing objects: 100% (10/10), done.</code>
<code class="go">remote: Total 11 (delta 0), reused 11 (delta 0)</code>
<code class="go">Unpacking objects: 100% (11/11), done.</code>
<code class="go">Checking connectivity... done.</code>
<code class="go">Submodule path 'DbConnector': checked out 'c3f01dc8862123d317dd46284b05b6892c7b29bc'</code></pre>

<p>Votre répertoire <code>DbConnector</code> est maintenant dans l’état exact dans lequel il était la dernière fois que vous avez validé.</p>

<p>Il existe une autre manière plus simple d’arriver au même résultat.
Si vous passez l’option <code>--recursive</code> à la commande <code>git clone</code>, celle-ci initialisera et mettra à jour automatiquement chaque sous-module du dépôt.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git clone --recursive https://github.com/chaconinc/MainProject
<code class="go">Clonage dans 'MainProject'...</code>
<code class="go">remote: Counting objects: 14, done.</code>
<code class="go">remote: Compressing objects: 100% (13/13), done.</code>
<code class="go">remote: Total 14 (delta 1), reused 13 (delta 0)</code>
<code class="go">Dépaquetage des objets: 100% (14/14), fait.</code>
<code class="go">Vérification de la connectivité... fait.</code>
<code class="go">Submodule 'DbConnector' (https://github.com/chaconinc/DbConnector) registered for path 'DbConnector'</code>
<code class="go">Clonage dans 'DbConnector'...</code>
<code class="go">remote: Counting objects: 11, done.</code>
<code class="go">remote: Compressing objects: 100% (10/10), done.</code>
<code class="go">remote: Total 11 (delta 0), reused 11 (delta 0)</code>
<code class="go">Dépaquetage des objets: 100% (11/11), fait.</code>
<code class="go">Vérification de la connectivité... fait.</code>
<code class="go">chemin du sous-module 'DbConnector' : 'c3f01dc8862123d317dd46284b05b6892c7b29bc' extrait</code></pre>
</section>













<section data-type="sect2" id="travailler-sur-un-projet-comprenant-des-sous-modules-PEtJsPCY">
<h3 id="Travailler-sur-un-projet-comprenant-des-sous-modules"><a href="#Travailler-sur-un-projet-comprenant-des-sous-modules">Travailler sur un projet comprenant des sous-modules</a></h3>

<p>Nous avons à présent une copie d’un projet comprenant des 
sous-modules, et nous allons collaborer à la fois sur le projet 
principal et sur le projet du sous-module.</p>










<section data-type="sect3" id="tirer-des-modifications-amont-9EtPHms4CA">
<h4>Tirer des modifications amont</h4>

<p>Le modèle le plus simple d’utilisation des sous-modules est le cas de
 la simple consommation d’un sous-projet duquel on souhaite obtenir les 
mises à jour de temps en temps mais auquel on n’apporte pas de 
modification dans la copie de travail.
Examinons un exemple simple.</p>

<p>Quand vous souhaitez vérifier si le sous-module a évolué, vous pouvez vous rendre dans le répertoire correspondant et lancer <code>git fetch</code> et puis <code>git merge</code> de la branche amont pour mettre à jour votre code local.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git fetch
<code class="go">From https://github.com/chaconinc/DbConnector</code>
<code class="go">   c3f01dc..d0354fc  master     -&amp;gt; origin/master</code>
<code class="gp">$</code> git merge origin/master
<code class="go">Mise à jour c3f01dc..d0354fc</code>
<code class="go">Avance rapide</code>
<code class="go"> scripts/connect.sh | 1 +</code>
<code class="go"> src/db.c           | 1 +</code>
<code class="go"> 2 files changed, 2 insertions(+)</code></pre>

<p>Si vous revenez maintenant dans le projet principal et lancez <code>git diff --submodule</code>, vous pouvez remarquer que le sous-module a été mis à jour et vous pouvez obtenir une liste des <em>commits</em> qui y ont été ajoutés.
Si vous ne voulez pas taper <code>--submodule</code> à chaque fois que vous lancez <code>git diff</code>, vous pouvez le régler comme format par défaut en positionnant le paramètre de configuration <code>diff.submodule</code> à la valeur «&nbsp;<code>log</code>&nbsp;».</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git config --global diff.submodule log
<code class="gp">$</code> git diff
<code class="go">Submodule DbConnector c3f01dc..d0354fc:</code>
<code class="go">  &amp;gt; more efficient db routine</code>
<code class="go">  &amp;gt; better connection routine</code></pre>

<p>Si vous validez à ce moment, vous fixez la version du sous-module à 
la version actuelle quand d’autres personnes mettront à jour votre 
projet.</p>

<p>Il existe aussi un moyen plus facile, si vous préférez ne pas avoir à
 récupérer et fusionner manuellement les modifications dans le 
sous-répertoire.
Si vous lancez la commande <code>git submodule update --remote</code>, Git se rendra dans vos sous-modules et réalisera automatiquement le <code>fetch</code> et le <code>merge</code>.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote DbConnector
<code class="go">remote: Counting objects: 4, done.</code>
<code class="go">remote: Compressing objects: 100% (2/2), done.</code>
<code class="go">remote: Total 4 (delta 2), reused 4 (delta 2)</code>
<code class="go">Dépaquetage des objets: 100% (4/4), fait.</code>
<code class="go">Depuis https://github.com/chaconinc/DbConnector</code>
<code class="go">   3f19983..d0354fc  master     -&amp;gt; origin/master</code>
<code class="go">chemin du sous-module 'DbConnector': checked out 'd0354fc054692d3906c85c3af05ddce39a1c0644' extrait</code></pre>

<p>Cette commande considère par défaut que vous souhaitez mettre à jour la copie locale vers la branche <code>master</code> du dépôt du sous-module.
Vous pouvez, cependant, indiquer une autre branche.
Par exemple, si le sous-module DbConnector suit la branche <code>stable</code> du dépôt amont, vous pouvez l’indiquer soit dans votre fichier <code>.gitmodules</code> (pour que tout le monde le suive de même) ou juste dans votre fichier local <code>.git/config</code>.
Voyons ceci dans le cas du fichier <code>.gitmodules</code>&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git config -f .gitmodules submodule.DbConnector.branch stable

<code class="gp">$</code> git submodule update --remote
<code class="go">remote: Counting objects: 4, done.</code>
<code class="go">remote: Compressing objects: 100% (2/2), done.</code>
<code class="go">remote: Total 4 (delta 2), reused 4 (delta 2)</code>
<code class="go">Dépaquetage des objets: 100% (4/4), fait.</code>
<code class="go">Depuis https://github.com/chaconinc/DbConnector</code>
<code class="go">   27cf5d3..c87d55d  stable -&amp;gt; origin/stable</code>
<code class="go">chemin du sous-module 'DbConnector' : 'c87d55d4c6d4b05ee34fbc8cb6f7bf4585ae6687' extrait</code></pre>

<p>Si vous ne spécifiez pas la partie <code>-f .gitmodules</code>, la 
commande ne fera qu’une modification locale, mais il semble plus logique
 d’inclure cette information dans l’historique du projet pour que tout 
le monde soit au diapason.</p>

<p>Quand vous lancez <code>git status</code>, Git vous montrera que nous avons de nouveaux <em>commits</em> («&nbsp;<em>new commits</em>&nbsp;») pour le sous-module.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git status
<code class="go">Sur la branche master</code>
<code class="go">Votre branche est à jour avec 'origin/master'.</code>

<code class="go">Modifications qui ne seront pas validées :</code>
<code class="go">  (utilisez "git add &amp;lt;fichier&amp;gt;..." pour mettre à jour ce qui sera validé)</code>
<code class="go">  (utilisez "git checkout -- &amp;lt;fichier&amp;gt;..." pour annuler les modifications dans la copie de travail)</code>

<code class="go">  modifié :   .gitmodules</code>
<code class="go">  modifié :   DbConnector (new commits)</code>

<code class="go">aucune modification n'a été ajoutée à la validation (utilisez "git add" ou "git commit -a")</code></pre>

<p>Si vous activez le paramètre de configuration <code>status.submodulesummary</code>, Git vous montrera aussi un résumé des modifications dans vos sous-modules&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git config status.submodulesummary 1

<code class="gp">$</code> git status
<code class="go">Sur la branche master</code>
<code class="go">Votre branche est à jour avec 'origin/master'.</code>

<code class="go">Modifications qui ne seront pas validées :</code>
<code class="go">  (utilisez "git add &amp;lt;fichier&amp;gt;..." pour mettre à jour ce qui sera validé)</code>
<code class="go">  (utilisez "git checkout -- &amp;lt;fichier&amp;gt;..." pour annuler les modifications dans la copie de travail)</code>

<code class="go">	modifié :   .gitmodules</code>
<code class="go">	modifié :   DbConnector (new commits)</code>

<code class="go">Sous-modules modifiés mais non mis à jour :</code>

<code class="go">* DbConnector c3f01dc...c87d55d (4):</code>
<code class="go">  &amp;gt; catch non-null terminated lines</code></pre>

<p>Ici, si vous lancez <code>git diff</code>, vous pouvez voir que le fichier <code>.gitmodules</code> a été modifié mais aussi qu’il y a un certain nombre de <em>commits</em> qui ont été tirés et sont prêts à être validés dans le projet du sous-module.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff
<code class="go">diff --git a/.gitmodules b/.gitmodules</code>
<code class="go">index 6fc0b3d..fd1cc29 100644</code>
<code class="go">--- a/.gitmodules</code>
<code class="go">+++ b/.gitmodules</code>
<code class="go">@@ -1,3 +1,4 @@</code>
<code class="go"> [submodule "DbConnector"]</code>
<code class="go">        path = DbConnector</code>
<code class="go">        url = https://github.com/chaconinc/DbConnector</code>
<code class="go">+       branch = stable</code>
<code class="go"> Submodule DbConnector c3f01dc..c87d55d:</code>
<code class="go">  &amp;gt; catch non-null terminated lines</code>
<code class="go">  &amp;gt; more robust error handling</code>
<code class="go">  &amp;gt; more efficient db routine</code>
<code class="go">  &amp;gt; better connection routine</code></pre>

<p>C’est une information intéressante car vous pouvez voir le journal 
des modifications que vous vous apprêtez à valider dans votre 
sous-module.
Une fois validées, vous pouvez encore visualiser cette information en 
lançant <code>git log -p</code>.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git log -p --submodule
<code class="go">commit 0a24cfc121a8a3c118e0105ae4ae4c00281cf7ae</code>
<code class="go">Author: Scott Chacon &amp;lt;schacon@gmail.com&amp;gt;</code>
<code class="go">Date:   Wed Sep 17 16:37:02 2014 +0200</code>

<code class="go">    updating DbConnector for bug fixes</code>

<code class="go">diff --git a/.gitmodules b/.gitmodules</code>
<code class="go">index 6fc0b3d..fd1cc29 100644</code>
<code class="go">--- a/.gitmodules</code>
<code class="go">+++ b/.gitmodules</code>
<code class="go">@@ -1,3 +1,4 @@</code>
<code class="go"> [submodule "DbConnector"]</code>
<code class="go">        path = DbConnector</code>
<code class="go">        url = https://github.com/chaconinc/DbConnector</code>
<code class="go">+       branch = stable</code>
<code class="go">Submodule DbConnector c3f01dc..c87d55d:</code>
<code class="go">  &amp;gt; catch non-null terminated lines</code>
<code class="go">  &amp;gt; more robust error handling</code>
<code class="go">  &amp;gt; more efficient db routine</code>
<code class="go">  &amp;gt; better connection routine</code></pre>

<p>Par défaut, Git essaiera de mettre à jour <strong>tous</strong> les sous-modules lors d’une commande <code>git submodule update --remote</code>, donc si vous avez de nombreux sous-modules, il est préférable de spécifier le sous-module que vous souhaitez mettre à jour.</p>
</section>













<section data-type="sect3" id="travailler-sur-un-sous-module-agtpSas8C3">
<h4>Travailler sur un sous-module</h4>

<p>Il y a fort à parier que si vous utilisez des sous-modules, vous le 
faîtes parce que vous souhaitez en réalité travailler sur le code du 
sous-module en même temps que sur celui du projet principal (ou à 
travers plusieurs sous-modules).
Sinon, vous utiliseriez plutôt un outil de gestion de dépendances plus 
simple (tel que Maven ou Rubygems).</p>

<p>De ce fait, détaillons un exemple de modifications réalisées dans le 
sous-module en même temps que dans le projet principal et de validation 
et de publication des modifications dans le même temps.</p>

<p>Jusqu’à maintenant, quand nous avons lancé la commande <code>git submodule update</code>
 pour récupérer les modifications depuis les dépôts des sous-modules, 
Git récupérait les modifications et mettait les fichiers locaux à jour 
mais en laissant le sous-répertoire dans un état appelé «&nbsp;HEAD 
détachée&nbsp;».
Cela signifie qu’il n’y pas de branche locale de travail ( comme <code>master</code>, par exemple) pour y valider les modifications.
Donc, toutes les modifications que vous y faites ne sont pas suivies non plus.</p>

<p>Pour rendre votre sous-module plus adapté à la modification, vous avez besoin de deux choses.
Vous devez vous rendre dans chaque sous-module et extraire une branche de travail.
Ensuite vous devez dire à Git ce qu’il doit faire si vous avez réalisé des modifications et que vous lancez <code>git submodule update --remote</code>
 pour tirer les modifications amont.
Les options disponibles sont soit de les fusionner dans votre travail 
local, soit de tenter de rebaser le travail local par dessus les 
modifications distantes.</p>

<p>En premier, rendons-nous dans le répertoire de notre sous-module et extrayons une branche.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git checkout stable
<code class="go">Basculement sur la branche 'stable'</code></pre>

<p>Attaquons-nous au choix de politique de gestion.
Pour le spécifier manuellement, nous pouvons simplement ajouter l’option <code>--merge</code> à l’appel de <code>update</code>.
Nous voyons ici qu’une modification était disponible sur le serveur pour ce sous-module et qu’elle a été fusionnée.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote --merge
<code class="go">remote: Counting objects: 4, done.</code>
<code class="go">remote: Compressing objects: 100% (2/2), done.</code>
<code class="go">remote: Total 4 (delta 2), reused 4 (delta 2)</code>
<code class="go">Dépaquetage des objets: 100% (4/4), fait.</code>
<code class="go">Depuis https://github.com/chaconinc/DbConnector</code>
<code class="go">   c87d55d..92c7337  stable     -&amp;gt; origin/stable</code>
<code class="go">Mise à jour de c87d55d..92c7337</code>
<code class="go">Avance rapide</code>
<code class="go"> src/main.c | 1 +</code>
<code class="go"> 1 file changed, 1 insertion(+)</code>
<code class="go">chemin du sous-module 'DbConnector': fusionné dans '92c7337b30ef9e0893e758dac2459d07362ab5ea'</code></pre>

<p>Si nous nous rendons dans le répertoire <code>DbConnector</code>, les nouvelles modifications sont déjà fusionnées dans notre branche locale <code>stable</code>.
Voyons maintenant ce qui arrive si nous modifions localement la 
bibliothèque et que quelqu’un pousse une autre modification en amont 
dans le même temps.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> <code class="nb">cd </code>DbConnector/
<code class="gp">$</code> vim src/db.c
<code class="gp">$</code> git commit -am <code class="s1">'unicode support'</code>
<code class="go">[stable f906e16] unicode support</code>
<code class="go"> 1 file changed, 1 insertion(+)</code></pre>

<p>Maintenant, si nous mettons à jour notre sous-module, nous pouvons 
voir ce qui arrive lors d’un rebasage de deux modifications 
concurrentes.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote --rebase
<code class="go">Premièrement, rembobinons head pour rejouer votre travail par-dessus...</code>
<code class="go">Application : unicode support</code>
<code class="go">chemin du sous-module 'DbConnector': rebasé dans '5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94'</code></pre>

<p>Si vous oubliez de spécifier <code>--rebase</code> ou <code>--merge</code>,
 Git mettra juste à jour le sous-module vers ce qui est sur le serveur 
et réinitialisera votre projet à l’état «&nbsp;HEAD détachée&nbsp;».</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote
<code class="go">chemin du sous-module 'DbConnector' : '5d60ef9bbebf5a0c1c1050f242ceeb54ad58da94' extrait</code></pre>

<p>Si cela arrive, ne vous inquiétez pas, vous pouvez simplement revenir
 dans le répertoire et extraire votre branche (qui contiendra encore 
votre travail) et fusionner ou rebaser <code>origin/stable</code> (ou la branche distante que vous souhaitez) à la main.</p>

<p>Si vous n’avez pas validé vos modifications dans votre sous-module, 
et que vous lancez une mise à jour de sous-module qui causerait des 
erreurs, Git récupérera les modifications mais n’écrasera pas le travail
 non validé dans votre répertoire de sous-module.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote
<code class="go">remote: Counting objects: 4, done.</code>
<code class="go">remote: Compressing objects: 100% (3/3), done.</code>
<code class="go">remote: Total 4 (delta 0), reused 4 (delta 0)</code>
<code class="go">Dépaquetage des objets: 100% (4/4), fait.</code>
<code class="go">Depuis https://github.com/chaconinc/DbConnector</code>
<code class="go">   5d60ef9..c75e92a  stable     -&amp;gt; origin/stable</code>
<code class="go">error: Vos modifications locales seraient écrasées par checkout:</code>
<code class="go">	scripts/setup.sh</code>
<code class="go">Please, commit your changes or stash them before you can switch branches.</code>
<code class="go">Aborting</code>
<code class="go">Impossible d'extraire 'c75e92a2b3855c9e5b66f915308390d9db204aca' dans le chemin du sous-module 'DbConnector'</code></pre>

<p>Si vous avez réalisé des modifications qui entrent en conflit avec 
des modifications amont, Git vous en informera quand vous mettrez à 
jour.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule update --remote --merge
<code class="go">Auto-merging scripts/setup.sh</code>
<code class="go">CONFLIT (contenu): Conflit de fusion dans scripts/setup.sh</code>
<code class="go">La fusion automatique a échoué ; réglez les conflits et validez le résultat</code>
<code class="go">Impossible de fusionner 'c75e92a2b3855c9e5b66f915308390d9db204aca' dans le chemin du sous-module 'DbConnector'</code></pre>

<p>Vous pouvez vous rendre dans le répertoire du sous-module et résoudre le conflit normalement.</p>
</section>













<section data-type="sect3" id="_publishing_submodules">
<h4>Publier les modifications dans un sous-module</h4>

<p>Nous avons donc des modifications dans notre répertoire de 
sous-module, venant à la fois du dépôt amont et de modifications locales
 non publiées.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff
<code class="go">Submodule DbConnector c87d55d..82d2ad3:</code>
<code class="go">  &amp;gt; Merge from origin/stable</code>
<code class="go">  &amp;gt; updated setup script</code>
<code class="go">  &amp;gt; unicode support</code>
<code class="go">  &amp;gt; remove unnessesary method</code>
<code class="go">  &amp;gt; add new option for conn pooling</code></pre>

<p>Si nous validons dans le projet principal et que nous le poussons en 
amont sans pousser les modifications des sous-modules, les autres 
personnes qui voudront essayer notre travail vont avoir de gros 
problèmes vu qu’elles n’auront aucun moyen de récupérer les 
modifications des sous-modules qui en font partie.
Ces modifications n’existent que dans notre copie locale.</p>

<p>Pour être sur que cela n’arrive pas, vous pouvez demander à Git de 
vérifier que tous vos sous-modules ont été correctement poussés avant de
 pouvoir pousser le projet principal.
La commande <code>git push</code> accepte un argument <code>--recurse-submodules</code> qui peut avoir pour valeur «&nbsp;<em>check</em>&nbsp;» ou «&nbsp;<em>on-demand</em>&nbsp;».
L’option «&nbsp;check&nbsp;» fera échouer <code>push</code> si au moins une des modifications des sous-modules n’a pas été poussée.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git push --recurse-submodules<code class="o">=</code>check
<code class="go">The following submodule paths contain changes that can</code>
<code class="go">not be found on any remote:</code>
<code class="go">  DbConnector</code>

<code class="go">Please try</code>

<code class="go">	git push --recurse-submodules=on-demand</code>

<code class="go">or cd to the path and use</code>

<code class="go">	git push</code>

<code class="go">to push them to a remote.</code></pre>

<p>Comme vous pouvez le voir, il donne aussi quelques conseils utiles 
sur ce que nous pourrions vouloir faire ensuite.
L’option simple consiste à se rendre dans chaque sous-module et à 
pousser manuellement sur les dépôts distants pour s’assurer qu’ils sont 
disponibles publiquement, puis de réessayer de pousser le projet 
principal.</p>

<p>L’autre option consiste à utiliser la valeur «&nbsp;on-demand&nbsp;» qui essaiera de faire tout ceci pour vous.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git push --recurse-submodules<code class="o">=</code>on-demand
<code class="go">Pushing submodule 'DbConnector'</code>
<code class="go">Décompte des objets: 9, fait.</code>
<code class="go">Delta compression using up to 8 threads.</code>
<code class="go">Compression des objets: 100% (8/8), fait.</code>
<code class="go">Écriture des objets: 100% (9/9), 917 bytes | 0 bytes/s, fait.</code>
<code class="go">Total 9 (delta 3), reused 0 (delta 0)</code>
<code class="go">To https://github.com/chaconinc/DbConnector</code>
<code class="go">   c75e92a..82d2ad3  stable -&amp;gt; stable</code>
<code class="go">Décompte des objets: 2, fait.</code>
<code class="go">Delta compression using up to 8 threads.</code>
<code class="go">Compression des objets: 100% (2/2), fait.</code>
<code class="go">Écriture des objets: 100% (2/2), 266 bytes | 0 bytes/s, fait.</code>
<code class="go">Total 2 (delta 1), reused 0 (delta 0)</code>
<code class="go">To https://github.com/chaconinc/MainProject</code>
<code class="go">   3d6d338..9a377d1  master -&amp;gt; master</code></pre>

<p>Comme vous pouvez le voir, Git s’est rendu dans le module <code>DbConnector</code> et l’a poussé avant de pousser le projet principal.
Si la poussée du sous-module échoue pour une raison quelconque, la poussée du projet principal sera annulée.</p>
</section>













<section data-type="sect3" id="fusion-de-modifications-de-sous-modules-metPIasvCY">
<h4>Fusion de modifications de sous-modules</h4>

<p>Si vous changez la référence d’un sous-module en même temps qu’une 
autre personne, il se peut que cela pose problème.
Particulièrement, si les historiques des sous-modules ont divergé et 
sont appliqués à des branches divergentes dans un super-projet, 
rapprocher toutes les modifications peut demander un peu de travail.</p>

<p>Si un des <em>commits</em> est un ancêtre direct d’un autre 
(c’est-à-dire une fusion en avance rapide), alors Git choisira 
simplement ce dernier pour la fusion et cela se résoudra tout seul.
Cependant, Git ne tentera pas de fusion, même très simple, pour vous.
Si les <em>commits</em> d’un sous-module divergent et doivent être fusionnés, vous obtiendrez quelque chose qui ressemble à ceci&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git pull
<code class="go">remote: Counting objects: 2, done.</code>
<code class="go">remote: Compressing objects: 100% (1/1), done.</code>
<code class="go">remote: Total 2 (delta 1), reused 2 (delta 1)</code>
<code class="go">Dépaquetage des objets: 100% (2/2), fait.</code>
<code class="go">From https://github.com/chaconinc/MainProject</code>
<code class="go">   9a377d1..eb974f8  master     -&amp;gt; origin/master</code>
<code class="go">Fetching submodule DbConnector</code>
<code class="go">warning: Failed to merge submodule DbConnector (merge following commits not found)</code>
<code class="go">Fusion automatique de DbConnector</code>
<code class="go">CONFLIT (sous-module): Conflit de fusion dans DbConnector</code>
<code class="go">La fusion automatique a échoué ; réglez les conflits et validez le résultat.</code></pre>

<p>Donc, ce qui s’est passé en substance est que Git a découvert que les
 deux points de fusion des branches à fusionner dans l’historique du 
sous-module sont divergents et doivent être fusionnés.
Il l’explique par «&nbsp;<em>merge following commits not found</em>&nbsp;» ( fusion  suivant les <em>commits</em> non trouvée), ce qui n’est pas clair mais que nous allons expliquer d’ici peu.</p>

<p>Pour résoudre le problème, vous devez comprendre l’état dans lequel le sous-module devrait se trouver.
Étrangement, Git ne vous donne pas d’information utile dans ce cas, pas même les SHA-1 des <em>commits</em> des deux côtés de l’historique.
Heureusement, c’est assez facile à comprendre.
Si vous lancez <code>git diff</code>, vous pouvez obtenir les SHA-1 des <em>commits</em> enregistrés dans chacune des branches que vous essayiez de fusionner.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff
<code class="go">diff --cc DbConnector</code>
<code class="go">index eb41d76,c771610..0000000</code>
<code class="go">--- a/DbConnector</code>
<code class="go">+++ b/DbConnector</code></pre>

<p>Donc, dans ce cas, <code>eb41d76</code> est le <em>commit</em> dans notre sous-module que <strong>nous</strong> avions et <code>c771610</code> est le <em>commit</em> amont.
Si nous nous rendons dans le répertoire du sous-module, il devrait déjà être sur <code>eb41d76</code> parce que la fusion ne l’a pas touché.
S’il n’y est pas, vous pouvez simplement créer et extraire une branche qui pointe dessus.</p>

<p>Ce qui importe, c’est le SHA-1 du <em>commit</em> venant de l’autre branche.
C’est ce que nous aurons à fusionner.
Vous pouvez soit essayer de fusionner avec le SHA-1 directement ou vous pouvez créer une branche à partir du <em>commit</em> puis essayer de la fusionner.
Nous suggérons d’utiliser cette dernière méthode, ne serait-ce que pour obtenir un message de fusion plus parlant.</p>

<p>Donc, rendons-nous dans le répertoire du sous-module, créons une branche basée sur ce second SHA-1 obtenu avec <code>git diff</code> et fusionnons manuellement.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> <code class="nb">cd </code>DbConnector

<code class="gp">$</code> git rev-parse HEAD
<code class="go">eb41d764bccf88be77aced643c13a7fa86714135</code>

<code class="gp">$</code> git branch try-merge c771610
<code class="go">(DbConnector) $ git merge try-merge</code>
<code class="go">Fusion automatique de src/main.c</code>
<code class="go">CONFLIT (contenu): Conflit de fusion dans src/main.c</code>
<code class="go">La fusion automatique a échoué ; réglez les conflits et validez le résultat.</code></pre>

<p>Nous avons eu un conflit de fusion ici, donc si nous le résolvons et 
validons, alors nous pouvons simplement mettre à jour le projet 
principal avec le résultat.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code><code> </code><code>vim</code><code> </code><code>src/main.c</code><code> </code><a class="co" id="co_utilitaires_git_CO1-1" href="https://git-scm.com/book/fr/v2/ch00/callout_utilitaires_git_CO1-1"><img src="Git%20-%20Sous-modules_fichiers/1.png" alt="1"></a><code>
</code><code class="gp">$</code><code> </code><code>git</code><code> </code><code>add</code><code> </code><code>src/main.c</code><code>
</code><code class="gp">$</code><code> </code><code>git</code><code> </code><code>commit</code><code> </code><code>-am</code><code> </code><code class="s1">'fusion de nos modifications'</code><code>
</code><code class="go">[master 9fd905e] fusion de nos modifications
</code><code class="go">
</code><code class="gp">$</code><code> </code><code class="nb">cd</code><code> </code><code>..</code><code> </code><a class="co" id="co_utilitaires_git_CO1-2" href="https://git-scm.com/book/fr/v2/ch00/callout_utilitaires_git_CO1-2"><img src="Git%20-%20Sous-modules_fichiers/2.png" alt="2"></a><code>
</code><code class="gp">$</code><code> </code><code>git</code><code> </code><code>diff</code><code> </code><a class="co" id="co_utilitaires_git_CO1-3" href="https://git-scm.com/book/fr/v2/ch00/callout_utilitaires_git_CO1-3"><img src="Git%20-%20Sous-modules_fichiers/3.png" alt="3"></a><code>
</code><code class="go">diff --cc DbConnector
</code><code class="go">index eb41d76,c771610..0000000
</code><code class="go">--- a/DbConnector
</code><code class="go">+++ b/DbConnector
</code><code class="go">@@@ -1,1 -1,1 +1,1 @@@
</code><code class="go">- Subproject commit eb41d764bccf88be77aced643c13a7fa86714135
</code><code class="go"> -Subproject commit c77161012afbbe1f58b5053316ead08f4b7e6d1d
</code><code class="go">++Subproject commit 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a
</code><code class="gp">$</code><code> </code><code>git</code><code> </code><code>add</code><code> </code><code>DbConnector</code><code> </code><a class="co" id="co_utilitaires_git_CO1-4" href="https://git-scm.com/book/fr/v2/ch00/callout_utilitaires_git_CO1-4"><img src="Git%20-%20Sous-modules_fichiers/4.png" alt="4"></a><code>
</code><code class="go">
</code><code class="gp">$</code><code> </code><code>git</code><code> </code><code>commit</code><code> </code><code>-m</code><code> </code><code class="s2">"Fusion du travail de Tom"</code><code> </code><a class="co" id="co_utilitaires_git_CO1-5" href="https://git-scm.com/book/fr/v2/ch00/callout_utilitaires_git_CO1-5"><img src="Git%20-%20Sous-modules_fichiers/5.png" alt="5"></a><code>
</code><code class="go">[master 10d2c60] Fusion du travail de Tom</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_utilitaires_git_CO1-1" href="https://git-scm.com/book/fr/v2/ch00/co_utilitaires_git_CO1-1"><img src="Git%20-%20Sous-modules_fichiers/1.png" alt="1"></a></dt>
<dd><p>Nous résolvons le conflit</p></dd>
<dt><a class="co" id="callout_utilitaires_git_CO1-2" href="https://git-scm.com/book/fr/v2/ch00/co_utilitaires_git_CO1-2"><img src="Git%20-%20Sous-modules_fichiers/2.png" alt="2"></a></dt>
<dd><p>Ensuite, nous retournons dans le projet principal</p></dd>
<dt><a class="co" id="callout_utilitaires_git_CO1-3" href="https://git-scm.com/book/fr/v2/ch00/co_utilitaires_git_CO1-3"><img src="Git%20-%20Sous-modules_fichiers/3.png" alt="3"></a></dt>
<dd><p>Nous pouvons revérifier les SHA-1</p></dd>
<dt><a class="co" id="callout_utilitaires_git_CO1-4" href="https://git-scm.com/book/fr/v2/ch00/co_utilitaires_git_CO1-4"><img src="Git%20-%20Sous-modules_fichiers/4.png" alt="4"></a></dt>
<dd><p>Nous résolvons l’entrée en conflit dans le sous-module</p></dd>
<dt><a class="co" id="callout_utilitaires_git_CO1-5" href="https://git-scm.com/book/fr/v2/ch00/co_utilitaires_git_CO1-5"><img src="Git%20-%20Sous-modules_fichiers/5.png" alt="5"></a></dt>
<dd><p>Enfin, nous validons la résolution.</p></dd>
</dl>

<p>Cela peut paraître compliqué mais ce n’est pas très difficile.</p>

<p>Curieusement, il existe un autre cas que Git gère seul.
Si un <em>commit</em> de fusion existe dans le répertoire du sous-module qui contient <strong>les deux</strong> <em>commits</em> dans ses ancêtres, Git va le suggérer comme solution possible.
Il voit qu’à un certain point de l’historique du projet du sous-module, quelqu’un a fusionné les branches contenant ces deux <em>commits</em>, donc vous désirerez peut-être utiliser celui-ci.</p>

<p>C’est pourquoi le message d’erreur précédent s’intitulait «&nbsp;<em>merge following commits not found</em>&nbsp;», parce que justement, il ne pouvait pas trouver <strong>le <em>commit</em> de fusion</strong>.
C’est déroutant car qui s’attendrait à ce qu’il <strong>essaie</strong> de le chercher&nbsp;?</p>

<p>S’il trouve un seul <em>commit</em> de fusion acceptable, vous verrez ceci&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git merge origin/master
<code class="go">warning: Failed to merge submodule DbConnector (not fast-forward)</code>
<code class="go">Found a possible merge resolution for the submodule:</code>
<code class="go"> 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a: &amp;gt; merged our changes</code>
<code class="go">If this is correct simply add it to the index for example</code>
<code class="go">by using:</code>

<code class="go">  git update-index --cacheinfo 160000 9fd905e5d7f45a0d4cbc43d1ee550f16a30e825a "DbConnector"</code>

<code class="go">which will accept this suggestion.</code>
<code class="go">Fusion automatique de DbConnector</code>
<code class="go">CONFLIT (submodule): Conflit de fusion dans DbConnector</code>
<code class="go">La fusion automatique a échoué ; réglez les conflits et validez le résultat.</code></pre>

<p>Ce qu’il suggère de faire est de mettre à jour l’index comme si vous aviez lancé <code>git add</code>,
 ce qui élimine le conflit, puis de valider.
Vous ne devriez cependant pas le faire.
Vous pouvez plus simplement vous rendre dans le répertoire du 
sous-module, visualiser la différence, avancer en avance rapide sur le <em>commit</em>, le tester puis le valider.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> <code class="nb">cd </code>DbConnector/
<code class="gp">$</code> git merge 9fd905e
<code class="go">Mise à jour eb41d76..9fd905e</code>
<code class="go">Avance rapide</code>

<code class="gp">$</code> <code class="nb">cd</code> ..
<code class="gp">$</code> git add DbConnector
<code class="gp">$</code> git commit -am <code class="s1">'Avance rapide sur un fils commun dans le sous-module'</code></pre>

<p>Cela revient au même, mais de cette manière vous pouvez au moins 
vérifier que ça fonctionne et vous avez le code dans votre répertoire de
 sous-module quand c’est terminé.</p>
</section>



</section>













<section data-type="sect2" id="trucs-et-astuces-pour-les-sous-modules-p0tGTrCE">
<h3 id="Trucs-et-astuces-pour-les-sous-modules"><a href="#Trucs-et-astuces-pour-les-sous-modules">Trucs et astuces pour les sous-modules</a></h3>

<p>Il existe quelques commandes qui permettent de travailler plus facilement avec les sous-modules.</p>










<section data-type="sect3" id="submodule-foreach-agtOHJT8C3">
<h4>Submodule foreach</h4>

<p>Il existe une commande submodule <code>foreach</code> qui permet de lancer une commande arbitraire dans chaque sous-module.
C’est particulièrement utile si vous avez plusieurs sous-modules dans le même projet.</p>

<p>Par exemple, supposons que nous voulons développer une nouvelle 
fonctionnalité ou faire un correctif et que nous avons déjà du travail 
en cours dans plusieurs sous-modules.
Nous pouvons facilement remiser tout le travail en cours dans tous les 
sous-modules.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule foreach <code class="s1">'git stash'</code>
<code class="go">Entering 'CryptoLibrary'</code>
<code class="go">No local changes to save</code>
<code class="go">Entering 'DbConnector'</code>
<code class="go">Saved working directory and index state WIP on stable: 82d2ad3 Merge from origin/stable</code>
<code class="go">HEAD is now at 82d2ad3 Merge from origin/stable</code></pre>

<p>Ensuite, nous pouvons créer une nouvelle branche et y basculer dans tous nos sous-modules.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git submodule foreach <code class="s1">'git checkout -b featureA'</code>
<code class="go">Entering 'CryptoLibrary'</code>
<code class="go">Basculement sur la nouvelle branche 'featureA'</code>
<code class="go">Entering 'DbConnector'</code>
<code class="go">Basculement sur la nouvelle branche  'featureA'</code></pre>

<p>Vous comprenez l’idée.
Une commande vraiment utile permet de produire un joli diff unifié des 
modifications dans le projet principal ainsi que dans tous les 
sous-projets.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git diff<code class="p">;</code> git submodule foreach <code class="s1">'git diff'</code>
<code class="go">Submodule DbConnector contains modified content</code>
<code class="go">diff --git a/src/main.c b/src/main.c</code>
<code class="go">index 210f1ae..1f0acdc 100644</code>
<code class="go">--- a/src/main.c</code>
<code class="go">+++ b/src/main.c</code>
<code class="go">@@ -245,6 +245,8 @@ static int handle_alias(int *argcp, const char ***argv)</code>

<code class="go">      commit_pager_choice();</code>

<code class="go">+     url = url_decode(url_orig);</code>
<code class="go">+</code>
<code class="go">      /* build alias_argv */</code>
<code class="go">      alias_argv = xmalloc(sizeof(*alias_argv) * (argc + 1));</code>
<code class="go">      alias_argv[0] = alias_string + 1;</code>
<code class="go">Entering 'DbConnector'</code>
<code class="go">diff --git a/src/db.c b/src/db.c</code>
<code class="go">index 1aaefb6..5297645 100644</code>
<code class="go">--- a/src/db.c</code>
<code class="go">+++ b/src/db.c</code>
<code class="go">@@ -93,6 +93,11 @@ char *url_decode_mem(const char *url, int len)</code>
<code class="go">        return url_decode_internal(&amp;amp;url, len, NULL, &amp;amp;out, 0);</code>
<code class="go"> }</code>

<code class="go">+char *url_decode(const char *url)</code>
<code class="go">+{</code>
<code class="go">+       return url_decode_mem(url, strlen(url));</code>
<code class="go">+}</code>
<code class="go">+</code>
<code class="go"> char *url_decode_parameter_name(const char **query)</code>
<code class="go"> {</code>
<code class="go">        struct strbuf out = STRBUF_INIT;</code></pre>

<p>Ici, nous pouvons voir que nous définissons une fonction dans un sous-module et que nous l’appelons dans le projet principal.
C’est un exemple exagérément simplifié, mais qui aide à mieux comprendre l’utilité de cette commande.</p>
</section>













<section data-type="sect3" id="alias-utiles-G4tYSGTbCN">
<h4>Alias utiles</h4>

<p>Vous pourriez être intéressé de définir quelques alias pour des 
commandes longues pour lesquelles vous ne pouvez pas régler la 
configuration par défaut.
Nous avons traité la définition d’alias Git dans <a data-type="xref" href="https://git-scm.com/book/fr/v2/1-git-basics/_git_aliases">Les alias Git</a>,
 mais voici un exemple d’alias que vous pourriez trouver utiles si vous 
voulez travailler sérieusement avec les sous-modules de Git.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git config alias.sdiff <code class="s1">'!'</code><code class="s2">"git diff &amp;amp;&amp;amp; git submodule foreach 'git diff'"</code>
<code class="gp">$</code> git config alias.spush <code class="s1">'push --recurse-submodules=on-demand'</code>
<code class="gp">$</code> git config alias.supdate <code class="s1">'submodule update --remote --merge'</code></pre>

<p>De cette manière, vous pouvez simplement lancer <code>git supdate</code> lorsque vous souhaitez mettre à jour vos sous-module ou <code>git spush</code> pour pousser avec une gestion de dépendance de sous-modules.</p>
</section>



</section>













<section data-type="sect2" id="les-problemes-avec-les-sous-modules-9EtJfxCB">
<h3 id="Les-problèmes-avec-les-sous-modules"><a href="#Les-probl%C3%A8mes-avec-les-sous-modules">Les problèmes avec les sous-modules</a></h3>

<p>Cependant, utiliser des sous-modules ne se déroule pas sans accroc.</p>

<p>Commuter des branches qui contiennent des sous-modules peut également
 s’avérer difficile.
Si vous créez une nouvelle branche, y ajoutez un sous-module, et revenez
 ensuite à une branche dépourvue de ce sous-module, vous aurez toujours 
le répertoire de ce sous-module comme un répertoire non suivi&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git checkout -b add-crypto
<code class="go">Basculement sur la nouvelle branche 'add-crypto'</code>

<code class="gp">$</code> git submodule add https://github.com/chaconinc/CryptoLibrary
<code class="go">Clonage dans 'CryptoLibrary'...</code>
<code class="go">...</code>

<code class="gp">$</code> git commit -am <code class="s1">'adding crypto library'</code>
<code class="go">[add-crypto 4445836] adding crypto library</code>
<code class="go"> 2 files changed, 4 insertions(+)</code>
<code class="go"> create mode 160000 CryptoLibrary</code>

<code class="gp">$</code> git checkout master
<code class="go">warning: unable to rmdir CryptoLibrary: Directory not empty</code>
<code class="go">Basculement sur la branche 'master'</code>
<code class="go">Votre branche est à jour avec 'origin/master'.</code>

<code class="gp">$</code> git status
<code class="go">Sur la branche master</code>
<code class="go">Votre branche est à jour avec 'origin/master'.</code>

<code class="go">Fichiers non suivis :</code>
<code class="go">  (utilisez "git add &amp;lt;fichier&amp;gt;..." pour inclure dans ce qui sera validé)</code>

<code class="go">	CryptoLibrary/</code>

<code class="go">aucune modification ajoutée à la validation mais des fichiers non suivis sont présents (utilisez "git add" pour les suivre)</code></pre>

<p>Supprimer le répertoire n’est pas difficile, mais sa présence est assez déroutante.
Si vous le supprimez puis que vous rebasculez sur la branche qui contient le sous-module, vous devrez lancer <code>submodule update --init</code> pour le repopuler.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git clean -ffdx
<code class="go">Suppression de CryptoLibrary/</code>

<code class="gp">$</code> git checkout add-crypto
<code class="go">Basculement sur la branche 'add-crypto'</code>

<code class="gp">$</code> ls CryptoLibrary/

<code class="gp">$</code> git submodule update --init
<code class="go">Submodule path 'CryptoLibrary': checked out 'b8dda6aa182ea4464f3f3264b11e0268545172af'</code>

<code class="gp">$</code> ls CryptoLibrary/
<code class="go">Makefile	includes	scripts		src</code></pre>

<p>Une fois de plus, ce n’est réellement difficile, mais cela peut être déroutant.</p>

<p>Une autre difficulté commune consiste à basculer de sous-répertoires 
en sous-modules.
Si vous suiviez des fichiers dans votre projet et que vous voulez les 
déplacer dans un sous-module, vous devez être très prudent ou Git sera 
inflexible.
Présumons que vous avez les fichiers dans un sous-répertoire de votre 
projet, et que vous voulez les transformer en un sous-module.
Si vous supprimez le sous-répertoire et que vous exécutez <code>submodule add</code>, Git vous hurle dessus avec&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> rm -Rf CryptoLibrary/
<code class="gp">$</code> git submodule add https://github.com/chaconinc/CryptoLibrary
<code class="go">'CryptoLibrary' already exists in the index</code></pre>

<p>Vous devez d’abord supprimer le répertoire <code>CryptoLibrary</code> de l’index.
Vous pourrez ensuite ajouter le sous-module&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git rm -r CryptoLibrary
<code class="gp">$</code> git submodule add https://github.com/chaconinc/CryptoLibrary
<code class="go">Cloning into 'CryptoLibrary'...</code>
<code class="go">remote: Counting objects: 11, done.</code>
<code class="go">remote: Compressing objects: 100% (10/10), done.</code>
<code class="go">remote: Total 11 (delta 0), reused 11 (delta 0)</code>
<code class="go">Unpacking objects: 100% (11/11), done.</code>
<code class="go">Checking connectivity... done.</code></pre>

<p>Maintenant, supposons que vous avez fait cela dans une branche.
Si vous essayez de basculer dans une ancienne branche où ces fichiers 
sont toujours dans l’arbre de projet plutôt que comme sous-module, vous 
aurez cette erreur&nbsp;:</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git checkout master
<code class="go">error: The following untracked working tree files would be overwritten by checkout:</code>
<code class="go">  CryptoLibrary/Makefile</code>
<code class="go">  CryptoLibrary/includes/crypto.h</code>
<code class="go">  ...</code>
<code class="go">Please move or remove them before you can switch branches.</code>
<code class="go">Aborting</code></pre>

<p>Vous pouvez le forcer à basculer avec <code>checkout -f</code>, mais soyez attentif à ce qu’il soit propre ou les modifications seraient écrasées.</p>

<pre data-type="programlisting" data-code-language="console"><code class="gp">$</code> git checkout -f master
<code class="go">warning: unable to rmdir CryptoLibrary: Directory not empty</code>
<code class="go">Basculement sur la branche 'master'</code></pre>

<p>Ensuite, lorsque vous rebasculez, vous aurez un répertoire <code>CryptoLibrary</code> vide et <code>git submodule update</code> pourrait ne pas le remettre en état.
Vous allez devoir vous rendre dans le répertoire de votre sous-module et lancer <code>git checkout .</code> pour retrouver tous vos fichiers.
Vous pouvez lancer ceci dans un script <code>submodule foreach</code> dans le cas de multiples sous-modules.</p>

<p>Il est important de noter que depuis les versions de Git récentes, 
les sous-modules conservent leurs données Git dans le répertoire <code>.git</code>
 du projet principal, ce qui à la différence des versions antérieures, 
permet de supprimer le dossier du sous-module sans perdre les <em>commits</em> et les branches qu’il contenait.</p>

<p>Avec ces outils, les sous-modules peuvent être une méthode assez 
simple et efficace pour développer simultanément sur des projets 
connexes mais séparés.</p>
</section>





<div id="nav"><a href="https://git-scm.com/book/fr/Utilitaires-Git-D%C3%A9boguer-avec-Git">prev</a> | <a href="https://git-scm.com/book/fr/v2/Utilitaires-Git-Empaquetage-bundling">next</a></div></div>
</div>

        </div>
      </div>
      <footer>
  <div class="site-source">
    This <a href="https://github.com/git/git-scm.com/blob/master/README.md#license">open sourced</a> site is <a href="https://github.com/git/git-scm.com">hosted on GitHub.</a><br>
    Patches, suggestions and comments are welcome.
  </div>
  <div class="sfc-member">
    Git is a member of <a href="https://git-scm.com/sfc">Software Freedom Conservancy</a>
  </div>
</footer>

<script src="Git%20-%20Sous-modules_fichiers/jquery-1.js"></script>
<script src="Git%20-%20Sous-modules_fichiers/jquery-ui-1.js"></script>
<script src="Git%20-%20Sous-modules_fichiers/jquery.js"></script>
<script src="Git%20-%20Sous-modules_fichiers/session.js"></script>
<script src="Git%20-%20Sous-modules_fichiers/site-3c292fabb3b9e614821a7f22cafdd144.js"></script>

    </div><script src="Git%20-%20Sous-modules_fichiers/jsapi" type="text/javascript"></script>



</body></html>